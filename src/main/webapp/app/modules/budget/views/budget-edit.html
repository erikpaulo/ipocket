<section ng-controller="BudgetEditController">
    <div layout="row" ng-if="budget">
        <div layout="column" flex="60">
            <md-card>
                <md-card-header class="md-title">
                    Planejamento
                </md-card-header>
                <md-divider></md-divider>
                <md-card-content style="padding: 0px 16px;">
                    <div layout="row">
                        <div layout="column" flex="100">
                            <md-tabs md-selected="selectedIndex" md-border-bottom md-autoselect  style="min-height:465px;">
                                <md-tab ng-repeat="group in budget.data" md-active="$first" label="{{group.name}}">
                                    <md-list ng-repeat="category in group.data">
                                        <fieldset class="standard">
                                            <md-list-item layout="row" flex="100" layout-align="center center" style="font-weight:600;min-height: 0px;">
                                                <div layout="column" flex="40">Categoria</div>
                                                <div layout="column" flex="20" layout-align="center center">Planejado Mês</div>
                                                <div layout="column" flex="20" layout-align="center center">Planejado Ano</div>
                                                <div layout="column" flex="20" layout-align="center center">Média U3M</div>
                                            </md-list-item>
                                            <legend class="md-subhead">{{category.name}}</legend>
                                            <md-list-item layout="row" ng-repeat="subcategory in category.data">
                                                <div layout="column" flex="40">
                                                    <span>{{subcategory.name}}</span>
                                                </div>
                                                <div layout="column" flex="20" layout-align="center center">
                                                    <md-input-container class="c-input-container-no-error c-no-margin">
                                                        <input name="amount" aria-label="amount" ng-model="subcategory.monthPlan" type="text" format="number" ng-blur="update()" style="text-align: center;">
                                                    </md-input-container>
                                                </div>
                                                <div layout="column" flex="20" layout-align="center center">
                                                    <span>{{subcategory.annualPlan | currency}}</span>
                                                </div>
                                                <div layout="column" flex="20" layout-align="center center">
                                                    <span>{{subcategory.averageL3M | currency}}</span>
                                                </div>
                                                <md-divider></md-divider>
                                            </md-list-item>
                                        </fieldset>
                                    </md-list>
                                </md-tab>
                            </md-tabs>
                        </div>
                    </div>
                </md-card-content>
                <md-divider></md-divider>
                <md-dialog-actions layout="row" layout-align="end center" class="mdl-color--blue-grey-50">
                    <md-button class="md-warn" ng-click="delete()">Remover</md-button>
                    <md-button class="md-primary" type="submit" ng-disabled="myForm.$invalid" ng-click="save()">Gravar</md-button>
                </md-dialog-actions>
            </md-card>
        </div>
        <div layout="column" flex="40">
            <md-card>
                <md-card-content layout="column" style="padding: 0px;">
                    <div layout="row">
                        <div layout="column" flex="100" class="md-padding" layout-align="center center">
                            <span class="md-display-1">{{budget.year}}</span>
                        </div>
                    </div>
                    <md-divider></md-divider>
                    <div layout="row">
                        <div layout="column" flex="35" class="md-padding" layout-align="center center">
                            <span class="md-title" ng-class="{'c-number-positive': budget.totalIncome>=0,'c-number-negative': budget.totalIncome<0}">{{budget.totalIncome | currency}}</span>
                            <span class="md-caption c-caption">Entrada Anual</span>
                        </div>
                        <md-divider></md-divider>
                        <div layout="column" flex="35" class="md-padding" layout-align="center center">
                            <span class="md-title" ng-class="{'c-number-positive': budget.totalIncome>=0,'c-number-negative': budget.totalIncome<0}">{{budget.totalExpense | currency}}</span>
                            <span class="md-caption c-caption">Despesa Anual</span>
                        </div>
                        <md-divider></md-divider>
                        <div layout="column" flex="30" class="md-padding" layout-align="center center">
                            <span class="md-title" ng-class="{'c-number-positive': budget.totalIncome>=0,'c-number-negative': budget.totalIncome<0}">{{budget.totalIncome - budget.totalExpense | currency}}</span>
                            <span class="md-caption c-caption">Economia Anual</span>
                        </div>

                    </div>
                </md-card-content>
            </md-card>
        </div>
    </div>
</section>